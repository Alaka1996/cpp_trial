name: Cppcheck

on: [push, pull_request]

jobs:
  cppcheck:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install Cppcheck
        run: sudo apt-get update && sudo apt-get install -y cppcheck

      - name: Run Cppcheck
        run: |
          cppcheck \
            --enable=all \
            --enable=warning \
            --enable=style \
            --enable=performance \
            --enable=portability \
            --enable=information \
            --enable=unusedFunction \
            --enable=missingInclude \
            --enable=misra \
            --inconclusive \
            --std=c99 \
            --force \
            --error-exitcode=1 \
            .
